{{ define "main" }}

<div class="home">

<div class="content">
<article>
{{ .Content }}
</article>
</div>

<div class="citation">
{{ i18n "citation" }}
</div>

<div class="featured-boxes">
  {{ range .Site.AllPages }}
    {{ if .Params.featured }}
      <div class="featured-box">
        <a href="{{ .RelPermalink }}" class="box-link">
          <div class="image">
            {{ with .Params.image }}
              <img src="{{ . | relURL }}" alt="{{ $.Params.title }}">
            {{ end }}
          </div>
          <div class="content">
            {{ with .Params.title }}
              <h3>{{ . }}</h3>
            {{ end }}
            {{ with .Params.description }}
              <p>{{ . }}</p>
            {{ end }}
          </div>
        </a>
      </div>
    {{ end }}
  {{ end }}
</div>














{{- $contentItems := slice -}}

{{- range .Site.RegularPages }}
  {{- if eq .Section "content" }}
    {{- $contentItem := dict "title" .Title "permalink" .Permalink -}}
    {{- $contentItems = append $contentItems $contentItem -}}
  {{- end }}
{{- end }}

{{- $contentItems | jsonify }}

<!-- Dark Themed Dropdown Button -->
<button class="dropdown-btn" onclick="toggleDropdown()">Content</button>

<!-- Dropdown content area -->
<div id="content-dropdown" class="dropdown-content">
  <!-- Content items will be dynamically added here by JavaScript -->
</div>

<style>
  /* Dark-themed dropdown button */
  .dropdown-btn {
    background-color: #333; /* Dark background */
    color: white; /* White text */
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }

  .dropdown-btn:hover {
    background-color: #555; /* Darker shade when hovering */
  }

  /* Dropdown content style */
  .dropdown-content {
    display: none; /* Initially hidden */
    position: absolute;
    background-color: #333; /* Dark background */
    min-width: 200px;
    z-index: 1;
    border-radius: 5px;
    padding: 10px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  }

  .dropdown-content a {
    color: white;
    padding: 8px 16px;
    text-decoration: none;
    display: block;
    border-radius: 5px;
    transition: background-color 0.3s ease;
  }

  .dropdown-content a:hover {
    background-color: #444; /* Darker shade for hover */
  }

  /* Show dropdown when clicked */
  .dropdown-content.show {
    display: block;
  }
</style>


<script>
  // Toggle the visibility of the dropdown menu
  function toggleDropdown() {
    document.getElementById("content-dropdown").classList.toggle("show");
  }

  // Fetch and populate the content list dynamically
  async function fetchContentItems() {
    try {
      // Fetch content items from the server (use your Hugo-generated route for content.json)
      const response = await fetch('/content.json');
      const contentItems = await response.json();

      // Get the dropdown menu element
      const dropdownContent = document.getElementById('content-dropdown');

      // Loop through content items and populate the dropdown
      contentItems.forEach(item => {
        const link = document.createElement('a');
        link.href = item.permalink;
        link.textContent = item.title || item.page.Title;  // Fallback to Title if not provided
        dropdownContent.appendChild(link);
      });
    } catch (error) {
      console.error("Error fetching content items:", error);
    }
  }

  // Initialize content items when the page loads
  document.addEventListener('DOMContentLoaded', fetchContentItems);
</script>









</div>

{{ end }}
