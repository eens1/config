<!--
<div class="featured-boxes">
  {{ range .Site.Params.featured_boxes }}
    <div class="featured-box">
      <a href="{{ .link }}" class="box-link">
        <div class="icon">
         {{ partial (printf "%s.html" .icon) . }}
        </div>
        <div class="content">
          <h3>{{ .title }}</h3>
          <p>{{ .description }}</p>
        </div>
      </a>
    </div>
  {{ end }}
</div>
-->


<div class="featured-boxes">
  {{ range .Site.Params.featured_boxes }}
    <div class="featured-box">
      <a href="{{ .link }}" class="box-link">
        <div class="image">
          {{ $page := site.GetPage .link }}
          {{ if $page }}
            {{ with $page.Params.image }}
              <img src="{{ . | relURL }}" alt="{{ $page.Params.title | default "Featured Image" }}">
            {{ end }}
          {{ end }}
        </div>
        <div class="content">
          {{ $page := site.GetPage .link }}
          {{ if $page }}
            {{ with $page.Params.title }}
              <h3>{{ . }}</h3>
            {{ end }}
            {{ with $page.Params.description }}
              <p>{{ . }}</p>
            {{ end }}
          {{ else }}
            <!-- Fallback to values in featured_boxes if page is not found -->
            {{ with .title }}
              <h3>{{ . }}</h3>
            {{ end }}
            {{ with .description }}
              <p>{{ . }}</p>
            {{ end }}
          {{ end }}
        </div>
      </a>
    </div>
  {{ end }}
</div>
